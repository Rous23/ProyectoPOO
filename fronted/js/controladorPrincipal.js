var categorias =[
    {
        nombreCategoria:'Niños',
        imgCategoria: 'img/niños.jpg',
        icono:'fas fa-child',
        descripcion: 'articulos para mascotas',
        productos:[
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Libros',
        imgCategoria: 'img/libros.jpg',
        icono:'fas fa-book',
        descripcion: 'Para Lectura',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Hogar',
        imgCategoria: 'img/hogar.jpg',
        icono:'fas fa-home',
        descripcion: 'organizacion, ropa de cama, cocina, fiesta, decoracion.',
        productos:[
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Calzado',
        imgCategoria: 'img/calzado.jpg',
        icono:'fas fa-shoe-prints',
        descripcion: 'Todo estilo de zapatos ya sea de hombre o mujer.',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Tecnologia',
        imgCategoria: 'img/card7.jpg',
        icono:'fas fa-atom',
        descripcion: 'Computadoras, camaras, celulares, impresoras',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Moda mujer',
        imgCategoria: 'img/modaMujer.jpg',
        icono:'fas fa-female',
        descripcion: 'vestidos, camisas, pantalones, chaquetas..',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Moda hombre',
        imgCategoria: 'img/modaHombre.jpg',
        icono:'fas fa-male',
        descripcion: 'shorts, pantalones, busos, ropa formal...',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Deporte',
        imgCategoria: 'img/deporte.jpg',
        icono:'fas fa-blender',
        descripcion: '',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Salud y belleza',
        imgCategoria: 'img/saludYbelleza.png',
        icono:'fas fa-heart',
        descripcion: 'vitaminas, mascarillas, maquillaje... ',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Accesorios',
        imgCategoria: 'img/accesorios.jpg',
        icono:'fas fa-swatchbook',
        descripcion: 'relojes, carteras, bisuteria, lentes... ',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Mascotas',
        imgCategoria: 'img/mascotas.jpg',
        icono:'fas fa-paw',
        descripcion: '',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    },
    {
        nombreCategoria:'Oficina',
        imgCategoria: 'img/usuario-3.jpg',
        icono:'fas fa-briefcase',
        descripcion: 'relojes, carteras, bisuteria, lentes... ',
        productos:[
            {
                nombreProducto:'Carro',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Muñecas',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            },
            {
                nombreProducto:'Lego',
                imgProducto: 'img/niños.jpg',
                descripcion: "Lorem ipsum, dolor sit",
                precioNormal: 49.99,
                precioPromocion: 39.99,
                porcentajeDescuento: '20%'
            }
        ]
    }
];

function principalUsuarioLogin(){
    let valorCookie = obtenerValorCookie();
    if(valorCookie){
        document.getElementById('lista-navbar').innerHTML = '';
        document.getElementById('lista-navbar').innerHTML = `
        <li class="nav-item dropdown text-center no-arrow d-md-none">
            <a id="search-dropdown" href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                <i class="fas fa-search fa-fw"  style="color: #67397F;"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-center" aria-labelledby="searchDropdown">
                <form class="form-inline my-2 px-2" style="align-items: center;">
                    <div class="input-group">
                        <input id="search-input" class="form-control" type="text" placeholder="Buscar" aria-label="Search" style="width: 200px!important;">
                        <div class="input-group-append">
                            <button class="btn btn-grad my-sm-0" type="button">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </li>
        <li class="nav-item">
            <a href="perfil-cliente.html" class="nav-link" role="button" style="color: #67397F;">Perfil</a>
        </li>
        <li class="nav-item dropdown no-arrow mx-1">
            <a href="#" class="nav-link" role="button">
                <span><i class="fas fa-shopping-cart" style="color: #67397F;"></i></span> 
            </a>
        </li>
        <li class="nav-item dropdown no-arrow" >
            <a href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #67397F;"> 
                <img src="img/perfil.jpg" class="img-profile rounded-circle" style="width: 2rem; height: 2rem;">
                <span class="mr-2 d-none d-lg-inline">${valorCookie}</span>
            </a>
            <div class="dropdown-menu dropdown-menu-right">
                <div class="text-center">${valorCookie}</div>
                <hr style="margin-top: .3rem;">
                <div class="text-center">
                    <i class="fas fa-cogs" style="color: rgba(144, 142, 143, .8)"></i>
                    <span>Configuración</span>
                </div>
                <div class="text-center">
                    <a href="logout.html">
                    <i class="fas fa-sign-out-alt" style="color: rgba(144, 142, 143, .8)"></i>
                    <span>Cerrar Sesion</span>
                    </a>
                </div>
            </div>    
        </li>
        `;
    }
}
principalUsuarioLogin();

function generarCategoria(){
    document.getElementById('card-categorias').innerHTML='';
    for(let i = 0 ; i < categorias.length ; i++){
        document.getElementById('card-categorias').innerHTML += `
        <div class="col-lg-2 col-md-3 col-4 py-1">
            <div onclick="imprimirProductosCategoria(${i})" class="card" style="cursor: pointer;">
                <div>
                    <img src= ${categorias[i].imgCategoria} class="d-block w-100 tamaño-img card-img-top">
                </div>
                <div class="card-footer py-3" style="background: #66397E; border-color: #66397E;color: white!important;padding-left: 0px!important;padding-right: 0px!important;">
                    <p class="card-text text-center" style="font-size: 15px;padding: 0%!important;">${categorias[i].nombreCategoria}</p>
                    <!--<a href="#" class="btn btn-primary">Go somewhere</a>-->
                </div>
            </div>
        </div>`;
    }
;}
generarCategoria();

function imprimirProductosCategoria(idCategoria){
    document.getElementById('body-principal').style.background = 'white';
    document.getElementById('main-box').innerHTML='';
    let productos = '';
    for (let i = 0 ; i < categorias[idCategoria].productos.length ; i++){
        console.log(categorias[idCategoria].productos[i]);
        productos += `
        <div class="col-lg-3 col-sm-4 col-6 px-1 py-1">
            <div class="card shadow-sm">
                <img src="${categorias[idCategoria].productos[i].imgProducto}" class="card-img-top" style="height:180px;">
                <div class="card-body" style="padding: .5rem!important;">
                    <h6 class="card-title">${categorias[idCategoria].productos[i].nombreProducto}</h6>
                    <p class="card-text">${categorias[idCategoria].productos[i].precioNormal +"  "+ categorias[idCategoria].productos[i].precioPromocion}</p>
                </div>
                <div class="card-footer" style="padding: .2rem .5rem!important;">
                    <p class="card-text">${categorias[idCategoria].productos[i].porcentajeDescuento}</p>
                </div>
            </div>
        </div>
        `;
    }
    document.getElementById('main-box').innerHTML = `
    <nav id="sidebar-categoria" class="navbar-nav" style="background: rgb(242,242,242);">
        <div class="sidebar-sticky">
            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-2 my-2 mb-1 text-muted">
                <span class="tam-letra" style="font-size: 15px;">Categorias</span>
            </h6>
            <ul id="nav-sidebar" class="nav flex-column">
                ${mostrarSidebar()}
            </ul>
        </div>
    </nav>
    <div id="content">
        <main role="main" class="ml-sm-auto starter-template mt-2">
            <div class="container-fluid">
                <div id="mostrarSubCategoria" class="row py-4 px-1">
                    <div class="col-12 text-center" style="font-size: 25px;">${categorias[idCategoria].nombreCategoria}</div>
                    ${productos}
                </div>
            </div>
        </main>
    </div>
    `;
}

function mostrarSidebar(){
    let lista = '';
    for(let i = 0 ; i < categorias.length ; i++){
        lista += `
        <li onclick="mostrarProductos(${i})" style="cursor:pointer;" class="nav-item">
            <span class="nav-link componentes-sidebar" data-feather="file style="display:block"><i style="color:#67397F;" class="${categorias[i].icono}"></i>
            <span>${categorias[i].nombreCategoria}</span></span>
        </li>`;
    }
    return lista;
}

function mostrarProductos(id){
    document.getElementById('mostrarSubCategoria').innerHTML='';
    document.getElementById('mostrarSubCategoria').innerHTML= `
    <div class="col-12 text-center" style="font-size: 25px;">${categorias[id].nombreCategoria}</div>
    `;
    for (let i = 0 ; i < categorias[id].productos.length ; i++){
        console.log(categorias[id].productos[i]);
        document.getElementById('mostrarSubCategoria').innerHTML += `
        <div class="col-lg-3 col-md-4 col-6 px-1 py-1">
            <div class="card shadow-sm">
                <img src="${categorias[id].productos[i].imgProducto}" class="card-img-top" style="height:180px;">
                <div class="card-body" style="padding: .5rem!important;">
                    <h6 class="card-title">${categorias[id].productos[i].nombreProducto}</h6>
                    <p class="card-text">${categorias[id].productos[i].precioNormal +"  "+ categorias[id].productos[i].precioPromocion}</p>
                </div>
                <div class="card-footer" style="padding: .2rem .5rem!important;">
                    <p class="card-text">${categorias[id].productos[i].porcentajeDescuento}</p>
                </div>
            </div>
        </div>
        `;
    }
}
/*function mostrarProductos(indice){
    document.getElementById('mostrarSubCategoria').innerHTML = categorias[indice].nombreCategoria;
    document.getElementById('mostrarSubCategoria').innerHTML +='';
    for (let i = 0 ; i < categorias[indice].productos.length ; i++){
        console.log(categorias[indice].productos[i]);
    }
}

function verCategorias(){
    window.location.href = "subCategoria.html";
}*/

/*ObtenerNombreUsuario*/
function obtenerValorCookie(){
    let cookie = document.cookie.split(';');
    for(let i=0 ; i<cookie.length ; i++){
        cookie[i].split('=');
        let nombreUsuarioCookie = cookie[i].split('=')
        console.log(nombreUsuarioCookie);
        if(nombreUsuarioCookie[0] == " nombreUsuario"){
            nombrePerfil = nombreUsuarioCookie[1].split('+');
            return nombrePerfil[0];
        }
        //console.log(cookie[i].split('='));
        
    }
    //console.log(cookie);
}

/*Validaciones LOGIN*/
var inputs =[
    {input:'email',valido:false},
    {input:'contraseña',valido:false}
];

function login(){
    console.log('hola');
    
    for(let i = 0 ; i < inputs.length ; i++)
        inputs[i].valido = validarCampoVacio(inputs[i].input);
    
    if(document.getElementById('email') != ''){
        let respuesta = validarEmail(document.getElementById('email').value);
        console.log(respuesta);
        
        inputs[1].valido = respuesta;
        colorearInput('email', respuesta);
    }       
    let listo = false;
    for(let i = 0 ; i < inputs.length ; i++){
        if(inputs[i].valido){
            listo = true;
        }else{
            listo = false;
            break;
        }
    }

    if(listo){
        window.location.href = "principal.html";
    }
}
function validarCampoVacio(id){
    let valorCampo = document.getElementById(id).value;
    let respuesta;
    if(valorCampo == ''){
        respuesta = false;
    }else{
        respuesta = true;
    }
    colorearInput(id,respuesta);
    return respuesta;
}

function colorearInput(id, respuesta){

    if (!respuesta){
        document.getElementById(id).classList.remove('is-valid');
        document.getElementById(id).classList.add('is-invalid');
    }else{ 
        document.getElementById(id).classList.remove('is-invalid');
        document.getElementById(id).classList.add('is-valid');
    }
}
function validarEmail(email){
    let re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}